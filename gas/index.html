<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<!-- Component components/gtag_events -->

<script>
    window.ccPorted = {
        ...(window.ccPorted || {}),
        gameID: (("getaway_shootout").length > 0) ? "getaway_shootout" : "ccported"
    }
    window.gameID = window.ccPorted.gameID;
</script>


<!-- Component components/gtag -->
<!-- supabase -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
<script>
  window.ccPorted = {
    version: "431.2025-02-05T03:54:35.853Z",
    ...(window.ccPorted || {})
  };
  try {
    const SUPABASE_URL = "https://dahljrdecyiwfjgklnvz.supabase.co";
    const SUPABASE_ANON_KEY =
      "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRhaGxqcmRlY3lpd2ZqZ2tsbnZ6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjgyNjE3NzMsImV4cCI6MjA0MzgzNzc3M30.8-YlXqSXsYoPTaDlHMpTdqLxfvm89-8zk2HG2MCABRI";
    window.ccSupaClient = supabase.createClient(
      SUPABASE_URL,
      SUPABASE_ANON_KEY
    );
  } catch (e) {
    alert(
      "Error Initializing. Please refresh. If this error persists, try a different domain." +
        "\n\n" +
        e.stack
    );
    console.log(e);
  }
</script>

<!-- large.js -->
<script src="/assets/scripts/helpers.js?i=8"></script>
<script src="/assets/scripts/large.js?i=7"></script>
<script src="/assets/scripts/stateHandler.js?i=6"></script>

<!-- external (gtag) -->
<script
  async
  src="https://www.googletagmanager.com/gtag/js?id=G-DJDL65P9Y4"
></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag("js", new Date());

  gtag("config", "G-DJDL65P9Y4");
  window.gtag = gtag;
</script>

<!-- End component components/gtag -->


<!-- Component components/adBlockDetect -->
<script>
  //  window.addEventListener("load", () => {
    
  //   log("Window loaded, running adblock check");
    
  //   // Create elements programmatically
  //   function createOverlay(visibility = "none") {
  //     const enabledEl = document.createElement("div");
  //     enabledEl.classList.add("adb-enabled");
      
  //     const overlay = document.createElement("div");
  //     overlay.classList.add("adb-enabled-overlay");
      
  //     const content = document.createElement("div");
  //     content.classList.add("adb-enabled-content");
      
  //     const title = document.createElement("h2");
  //     title.textContent = "Ad blocker detected";
      
  //     const message = document.createElement("p");
  //     message.textContent = "Please disable your AdBlock to continue.";
      
  //     const continueBtn = document.createElement("button");
  //     continueBtn.classList.add("adb-continue-btn");
  //     continueBtn.textContent = "Continue without supporting (10s)";
      
  //     // Build DOM structure
  //     content.appendChild(title);
  //     content.appendChild(message);
  //     content.appendChild(continueBtn);
  //     overlay.appendChild(content);
  //     enabledEl.appendChild(overlay);
  //     enabledEl.style.display = visibility;
      
  //     // Add styles
  //     const styles = document.createElement("style");
  //     styles.textContent = `
  //       .adb-enabled-overlay {
  //         width: 100%;
  //         height: 100%;
  //         position: fixed;
  //         top: 0;
  //         left: 0;
  //         color: white;
  //         background-color: #ee3030;
  //         z-index: 99999;
  //         padding: 70px;
  //       }
  //       .adb-continue-btn {
  //         cursor: pointer;
  //         padding: 5px;
  //         border: 1px solid white;
  //         background-color: transparent;
  //         color: white;
  //         transition: 500ms;
  //       }
  //       .adb-continue-btn:hover {
  //         background-color: white;
  //         color: #ee3030;
  //         transition: 500ms;
  //       }
  //       body {
  //         margin-right: 150px;
  //       }
  //       header .r-side-nav {
  //         padding-right: 150px !important;
  //       }
  //     `;
  //     document.head.appendChild(styles);
      
  //     return { enabledEl, continueBtn };
  //   }
    
  //   const { enabledEl, continueBtn } = createOverlay("none");
  //   document.body.appendChild(enabledEl);
  
  //   function adBlockDetected() {
  //     log("adBlockDetected()");
  //     let ax = false;
  //     enabledEl.style.display = "block";
  
  //     // Adblock delay countdown
  //     let countdown = 10;
  //     const countdownInterval = setInterval(function() {
  //       countdown--;
  //       continueBtn.textContent = `Continue without supporting (${countdown}s)`;
  //       if (countdown === 0) {
  //         clearInterval(countdownInterval);
  //         continueBtn.textContent = "Continue without supporting";
  //       }
  //     }, 1000);
  
  //     continueBtn.addEventListener("click", (e) => {
  //       if (countdown === 0) {
  //         ax = true;
  //         enabledEl.style.display = "none";
  //       }
  //     });
  
  //     // Check if the element still exists every 750ms
  //     const checkInterval = setInterval(function() {
  //       if (!document.body.contains(enabledEl)) {
  //         clearInterval(checkInterval);
  //         const { enabledEl: newEl } = createOverlay("block");
  //         document.body.appendChild(newEl);
  //       }
  //     }, 750);
  //   }
  
  //   function adBlockNotDetected() {
  //     log("Blocks not detected");
  //     enabledEl.style.display = "none";
  //   }
  
  //   const REQUEST_URL = "https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js";
  //   const REQUEST_CONFIG = {
  //     method: "HEAD",
  //     mode: "no-cors",
  //   };
  
  // const checkAdsBlocked = (callback) => {
  //   fetch(REQUEST_URL, REQUEST_CONFIG)
  //       .then((response) => {
  //           callback(response.redirected);
  //       })                                  
  //       .catch(() => {
  //           callback(true);
  //       });
  //   };
  
  //   checkAdsBlocked((adsBlocked)=>{
  //       if(adsBlocked){
  //           adBlockDetected();
  //       }else{
  //           adBlockNotDetected();
  //       }
  //   });
  // });
  </script>

<!-- End component components/adBlockDetect -->


<script src="/gtag_events.js?v=004" data-gameid="getaway_shootout"></script>
<!-- End component components/gtag_events -->

    <meta charset="utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Getaway Shootout | Unblocked on CCPorted</title>
    <meta name = "description" content = "Jump and shoot your way past your friends and the computer to get to the objective. Play getaway shootout for free and unblocked on CCPorted" />
  </head>

  <body>
    <div id="unity-container" class="unity-desktop">
      <canvas id="unity-canvas" width="960" height="600" tabindex="-1"></canvas>
    </div>
    <style>
      body,
      html {
        margin: 0;
        overflow: hidden;
      }

      canvas {
        width: 100vw !important;
        height: 100vh !important;
      }
      #loading-chunk {
        position: absolute;
        top: 50vh;
        left: 50vw;
        color: white;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        width: 0;
        height: 0;
        z-index:99999;
      }
      .loading-parent{
        width: 500px;
        background-color: #ccc;
        height: 20px;
        display: block;
      }
      
      .loading-bar{
        background-color: dodgerblue;
      }
    </style>
    <div id="loading-chunk">
      <div class="loading-parent">
        <div class="loading-bar">&nbsp;</div>
      </div>
    </div>
    <script>
      const container = document.querySelector("#unity-container");
      const canvas = document.querySelector("#unity-canvas");
    </script>

    <script>
      // Hacky solution for managing audio volume of the game player dynamically
      window.audioStream = [];
      window.AudioContextOrigin =
        window.AudioContext || window.webkitAudioContext;
      window.fakeDestinations = [];
      window.AudioContext = function () {
        const ac = new window.AudioContextOrigin();
        const dest = ac.createMediaStreamDestination();
        const baseMerge = ac.createGain();

        const fakeDestination = ac.createGain();
        window.fakeDestinations.push(fakeDestination);
        fakeDestination.gain.value = 1;
        fakeDestination.connect(ac.destination);

        window.audioStream.push(dest.stream);
        baseMerge.connect(dest);
        ac.createGainOrigin = ac.createGain;

        ac.createGain = function () {
          const gain = ac.createGainOrigin();
          gain.connect(baseMerge);
          gain.connectOrigin = gain.connect;
          gain.connect = function () {
            return gain.connectOrigin(fakeDestination);
          };
          return gain;
        };
        return ac;
      };
    </script>

    <script>
      // Patch canvas requestPointerLock
      canvas._requestPointerLock = canvas.requestPointerLock;
      canvas.requestPointerLock = async () => {
        try {
          return await canvas._requestPointerLock({
            unadjustedMovement: true,
          });
        } catch (e) {
          /* swallow pointer lock errors */
        }
      };

      if (navigator && /iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
        const meta = document.createElement("meta");
        meta.name = "viewport";
        meta.content =
          "width=device-width, height=device-height, initial-scale=1.0, user-scalable=no, shrink-to-fit=yes";
        document.getElementsByTagName("head")[0].appendChild(meta);
        container.className = "unity-mobile";
        canvas.className = "unity-mobile";
      } else {
        canvas.style.width = "960px";
        canvas.style.height = "600px";
      }

      let gameInstance;

      const bundleFormat = "1";

      const legacyGameProperties = {
        productVersion: "1.0",
        graphicsAPI: ["WebGL 1.0"],
        webglContextAttributes: { preserveDrawingBuffer: false },
        splashScreenStyle: "Dark",
        backgroundColor: "#231F20",
        developmentBuild: false,
        multithreading: false,
        unityVersion: "2019.3.15f1",
        Module: { splashScreenStyle: "Dark", preRun: [] },
      };

      let config;
      let loaderUrl;
      let configBlobUrl;
      let encodedConfig;
      let configBlob;

      loaderUrl = "resources/loader.js";

      config = {
        dataUrl: "resources/game.data",
        wasmFrameworkUrl: "",
        asmCodeUrl: "resources/asm.code",
        asmMemoryUrl: "resources/asm.memory",
        asmFrameworkUrl: "resources/asm.framework",
        streamingAssetsUrl: "",
        companyName: "ccported.github.io",
        productName: "Getaway Shootout",
        ...legacyGameProperties,
      };

      encodedConfig = JSON.stringify(config);
      configBlob = new Blob([encodedConfig], { type: "application/json" });
      configBlobUrl = URL.createObjectURL(configBlob);

      const loadingBar = document.querySelector(".loading-bar")
      const loadingChunk = document.getElementById("loading-chunk");

      function instantiateUsingUnityLoader() {
        const res = UnityLoader.instantiate("unity-container", configBlobUrl, {
          onProgress: (instance, progress) => {
            console.log("P",progress)
            loadingBar.style.width = ((progress + 0.1) * 100).toFixed("1") + "%";
            if(progress >= 0.9){
              loadingChunk.remove();
            }
          },
          Module: {
            resolveBuildUrl: (e) => {
              return e;
            },
            locateFile: (e) => {
              if (e === "build.wasm") {
                return config["wasmCodeUrl"];
              }

              return e;
            },
          },
        });
      }

      function instantiateUsingCreateUnityInstance() {
        createUnityInstance(canvas, config, (progress) => {
          sendParentMessage("progress", { progress: progress });
        })
          .then((instance) => {
            gameInstance = instance;
            sendParentMessage("ready", {});
          })
          .catch((error) => {
            sendParentMessage("error", { error: error });
          });
      }

      function patchUnityLoader(loaderSource) {
        // Older versions of the loader will only identify and respect compression if the file ends in .unityweb
        // Because this format has changed, we need to patch the old loaders to always respect compression

        if (
          loaderSource.indexOf('e.wasmCodeUrl.endsWith(".unityweb")') !== -1
        ) {
          return loaderSource.replace(
            'e.wasmCodeUrl.endsWith(".unityweb")',
            '(e.wasmCodeUrl.endsWith(".unityweb") || true)'
          );
        }
        return loaderSource;
      }

      async function getPatchedUnityLoaderUrl() {
        const loaderSourceResponse = await fetch(loaderUrl);
        const loaderSource = await loaderSourceResponse.text();
        const patchedLoaderSource = patchUnityLoader(loaderSource);
        const patchedLoaderBlob = new Blob([patchedLoaderSource], {
          type: "application/javascript",
        });
        const patchedLoaderUrl = URL.createObjectURL(patchedLoaderBlob);

        return patchedLoaderUrl;
      }

      async function instantiateUnityLoader() {
        const script = document.createElement("script");
        script.src = await getPatchedUnityLoaderUrl();

        script.onload = () => {
          instantiateUsingUnityLoader();
        };
        document.body.appendChild(script);
      }

      addEventListener("DOMContentLoaded", () => {
        instantiateUnityLoader();
      });
    </script>
  </body>
</html>
